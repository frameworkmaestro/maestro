<div id="annoLayout" style="width:100%;height:100%;">
    <div id="annoLeftPane" region="west" split="true" title="Corpus" style="height: 100%">
        <div style="padding:5px"><input id="corpus" name="corpus" type="text" style="width:200px; padding:5px" placeholder="{{_'Search Corpus'}}"></div>
            <ul id="corpusTree"></ul>
    </div>
    <div id="annoCenterPane" region="center" title="{{_'Corpus Annotation'}}" style="height: 100%">
        <div class="easyui-layout" style="width:100%;height:100%;">
            <div id="sentencesPane" region="north" style="width:100%;height:250px"   split="true" data-options="border:1"></div>
            <div id="layersPane" region="center" style="width:100%;height:300px" data-options="border:1"></div>
        </div>
    </div>
</div>

<script type="text/javascript">
    var annotation = {
        isMaster: {{$data->isMaster|noescape}},
        isSenior: {{$data->isSenior|noescape}},
        rgbColors: JSON.parse({{$data->colors}}),
        layerType: JSON.parse({{$data->layerType}}),
        instantiationType: JSON.parse({{$data->instantiationType}}),
        instantiationTypeObj: JSON.parse({{$data->instantiationTypeObj}})
    };

    annotation.showDocument = function (document) {
        $('#layersPane').html('');
        manager.doGet({{$manager->getURL('fnbr20/annotation/main/sentences')}} + '/' + document,'sentencesPane');
    }

    $(function () {

        $('#annoLayout').layout();
        
        $('#corpus').textbox({
            buttonText:{{_'Search Corpus'}},
            //iconCls:'icon-search',
            iconAlign:'right',
            prompt: {{_'Search Corpus'}},
            onClickButton: function() {
                $('#corpusTree').tree({queryParams: {corpus: $('#corpus').textbox('getValue')}});
            }
        });
        
        $('#corpusTree').tree({
            url: {{$manager->getURL('fnbr20/annotation/main/corpusTree')}},
            onSelect: function (node) {
                console.log(node);
                if (node.id.charAt(0) == 'd') {
                    annotation.showDocument(node.id);
                }
            }
        });
    });
</script>
